{
  "hash": "cdb8a08a3ce1dcc189d56334f32a23df",
  "result": {
    "markdown": "---\ntitle: Bayesian Chain Ladder\nauthor: ''\ndate: '2019-01-12'\nslug: bayesian-chain-ladder\ntags:\n  - reserving\ndescription: Use Bayesian methods to replicate the Chain Ladder reserving method\ndraft: false\n---\n\n\n\n\n# Goal\n\nThe goal of this post is to use the [`rstanarm`](http://mc-stan.org/rstanarm) package to run a Bayesian Chain Ladder reserving method on the CAS Loss Reserve Database. The cross classified generalized linear model (GLM) formulation of the Chain Ladder will be used.\n\nSee [STOCHASTIC LOSS RESERVING USING GENERALIZED LINEAR MODELS](https://www.casact.org/pubs/monographs/papers/03-Taylor.pdf) for a description of the cross classified GLM formulation. The same example triangle used in the monograph is also used in this post.\n\nIn future posts, we will investigate the results further and explore extensions to the baseline model.\n\n# Data\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n\n# devtools::install_github(\"problemofpoints/reservetestr\")\nlibrary(tidyverse)\nlibrary(ChainLadder)\nlibrary(reservetestr)\nlibrary(broom)\nlibrary(broom.mixed)\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(popformatting)\nlibrary(patchwork)\n\n# set ggplot2 theme\npopformatting::gg_set_theme()\n\n# pull in the subset of the CAS loss reserve database used by Meyers\ncas_triangle_db_meyers <- reservetestr::cas_loss_reserve_db %>%\n  reservetestr::get_meyers_subset()\n\n# extract sample paid loss triangle to use\nsample_company <-  cas_triangle_db_meyers %>%\n  dplyr::filter(group_id == 7080 & line == \"wkcomp\")\n\npaid_triangle <- sample_company %>%\n  pull(train_tri_set) %>% \n  .[[1]] %>% \n  .$paid\n\npaid_triangle_no_exposure <- paid_triangle\nattr(paid_triangle_no_exposure, \"exposure\") <- NULL\n\npaid_triangle\n#>       dev_lag\n#> acc_yr     1      2      3      4      5      6      7      8      9     10\n#>   1988 41821  76550  96697 112662 123947 129871 134646 138388 141823 144781\n#>   1989 48167  87662 112106 130284 141124 148503 154186 158944 162903     NA\n#>   1990 52058  99517 126876 144792 156240 165086 170955 176346     NA     NA\n#>   1991 57251 106761 133797 154668 168972 179524 187266     NA     NA     NA\n#>   1992 59213 113342 142908 165392 179506 189506     NA     NA     NA     NA\n#>   1993 59475 111551 138387 160719 175475     NA     NA     NA     NA     NA\n#>   1994 65607 110255 137317 159972     NA     NA     NA     NA     NA     NA\n#>   1995 56748  96063 122811     NA     NA     NA     NA     NA     NA     NA\n#>   1996 52212  92242     NA     NA     NA     NA     NA     NA     NA     NA\n#>   1997 43962     NA     NA     NA     NA     NA     NA     NA     NA     NA\n#> attr(,\"exposure\")\n#>  [1] 195712 212194 219796 249595 268293 316726 344287 356880 313412 261261\n```\n:::\n\n\n# Standard chain ladder estimate\n\nWe can use the `glmReserve` function from the `ChainLadder` package to produce the standard Chain Ladder reserve estimate. This method provides both a point estimate and a distribution of estimates, using a bootstrapping approach. This function uses the cross classified over-dispersed Poisson GLM formulation applied to an incremental paid loss triangle, which exactly re-produces the traditional Chain Ladder reserve estimate. For convenience in producing the Bayesian equivalent, we use the Negative Binomial distribution instead of the over-dispersed Poisson. This is done by setting the `nb` parameter to `TRUE` in `glmReserve`. We still achieve mean results essentially equivalent to the traditional chain ladder estimate.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nest_chainladder_nb <- glmReserve(paid_triangle_no_exposure, \n                                 var.power = 1, link.power = 0, cum = TRUE, \n                                 mse.method = \"bootstrap\", nsim = 5000,\n                                 nb = TRUE)\n\nest_chainladder_nb$summary %>%\n  rownames_to_column(\"Acc Yr\") %>% \n  mutate_at(c(2,4:6), popformatting::number_format) %>% \n  flextable::regulartable() %>% \n  popformatting::ft_theme(add_w = 0.0, add_h = 0.00, add_h_header = 0.00) %>%\n  flextable::bg(i = nrow(est_chainladder_nb$summary), \n                bg = \"#F2F2F2\", part = \"body\") %>% \n  popformatting::add_title_header(\"Chain ladder reserve estimate\", \n                                  font_size = 18) %>% \n  flextable::fontsize(size = 16, part = \"all\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-c02b359e{}.cl-c01cea16{font-family:'Arial';font-size:16pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c01cea34{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c01cea3e{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c01d2256{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c01d2260{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c01d226a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c01d226b{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c01da3e8{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da3f2{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da3f3{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da3fc{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da3fd{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da406{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da407{width:53.1pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da410{width:71.4pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da411{width:62.3pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da41a{width:45.7pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da424{width:47pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da425{width:75.1pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da42e{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da42f{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da438{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da442{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da443{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da44c{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da456{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da457{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da460{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da461{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da462{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da46a{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da46b{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da474{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da475{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da476{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da47e{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c01da488{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-c02b359e'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"7\"class=\"cl-c01da456\"><p class=\"cl-c01d2256\"><span class=\"cl-c01cea16\">Chain ladder reserve estimate</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da476\"><p class=\"cl-c01d2256\"><span class=\"cl-c01cea34\">Acc Yr</span></p></td><td class=\"cl-c01da475\"><p class=\"cl-c01d2256\"><span class=\"cl-c01cea34\">Latest</span></p></td><td class=\"cl-c01da488\"><p class=\"cl-c01d2260\"><span class=\"cl-c01cea34\">Dev.To.Date</span></p></td><td class=\"cl-c01da475\"><p class=\"cl-c01d2256\"><span class=\"cl-c01cea34\">Ultimate</span></p></td><td class=\"cl-c01da46b\"><p class=\"cl-c01d2256\"><span class=\"cl-c01cea34\">IBNR</span></p></td><td class=\"cl-c01da47e\"><p class=\"cl-c01d2256\"><span class=\"cl-c01cea34\">S.E</span></p></td><td class=\"cl-c01da474\"><p class=\"cl-c01d2260\"><span class=\"cl-c01cea34\">CV</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da3f3\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1989</span></p></td><td class=\"cl-c01da3fd\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">162,903</span></p></td><td class=\"cl-c01da3e8\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.9794376</span></p></td><td class=\"cl-c01da3fd\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">166,323</span></p></td><td class=\"cl-c01da3fc\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">3,420</span></p></td><td class=\"cl-c01da3f2\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">333</span></p></td><td class=\"cl-c01da406\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.09749463</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1990</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">176,346</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.9559292</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">184,476</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">8,130</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">542</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.06664080</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1991</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">187,266</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.9255245</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">202,335</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">15,069</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">823</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.05462254</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1992</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">189,506</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.8931800</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">212,170</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">22,664</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1,126</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.04966852</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1993</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">175,475</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.8464949</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">207,296</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">31,821</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1,480</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.04651688</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1994</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">159,972</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.7788088</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">205,406</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">45,434</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">2,164</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.04763981</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1995</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">122,811</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.6710177</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">183,022</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">60,211</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">3,047</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.05060250</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1996</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">92,242</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.5329782</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">173,069</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">80,827</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">4,705</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.05820747</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da44c\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1997</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">43,962</span></p></td><td class=\"cl-c01da442\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.2934360</span></p></td><td class=\"cl-c01da443\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">149,818</span></p></td><td class=\"cl-c01da438\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">105,856</span></p></td><td class=\"cl-c01da42f\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">8,211</span></p></td><td class=\"cl-c01da42e\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.07756789</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c01da41a\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">total</span></p></td><td class=\"cl-c01da411\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1,310,483</span></p></td><td class=\"cl-c01da425\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.7782358</span></p></td><td class=\"cl-c01da411\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">1,683,915</span></p></td><td class=\"cl-c01da407\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">373,432</span></p></td><td class=\"cl-c01da424\"><p class=\"cl-c01d226a\"><span class=\"cl-c01cea3e\">11,626</span></p></td><td class=\"cl-c01da410\"><p class=\"cl-c01d226b\"><span class=\"cl-c01cea3e\">0.03113416</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nThe total Chain Ladder reserve estimate for this triangle is 373,432 with an overall coefficient of variation (CV) of 3.11%.\n\nWe can also output the underlying GLM formula and fitted parameters.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsummary(est_chainladder_nb, type = \"model\")\n#> \n#> Call:\n#> glm.nb(formula = value ~ factor(origin) + factor(dev), data = ldaFit, \n#>     init.theta = 331.5546543, link = log)\n#> \n#> Deviance Residuals: \n#>     Min       1Q   Median       3Q      Max  \n#> -2.0547  -0.8338   0.0000   0.7548   2.4347  \n#> \n#> Coefficients:\n#>                    Estimate Std. Error z value Pr(>|z|)    \n#> (Intercept)        10.64796    0.02678 397.680  < 2e-16 ***\n#> factor(origin)1989  0.14524    0.02639   5.503 3.73e-08 ***\n#> factor(origin)1990  0.24120    0.02752   8.765  < 2e-16 ***\n#> factor(origin)1991  0.36897    0.02875  12.832  < 2e-16 ***\n#> factor(origin)1992  0.39068    0.03025  12.913  < 2e-16 ***\n#> factor(origin)1993  0.36907    0.03218  11.471  < 2e-16 ***\n#> factor(origin)1994  0.35424    0.03480  10.180  < 2e-16 ***\n#> factor(origin)1995  0.24495    0.03873   6.325 2.53e-10 ***\n#> factor(origin)1996  0.18578    0.04547   4.086 4.39e-05 ***\n#> factor(origin)1997  0.04312    0.06128   0.704    0.482    \n#> factor(dev)2       -0.20610    0.02598  -7.934 2.13e-15 ***\n#> factor(dev)3       -0.74477    0.02721 -27.376  < 2e-16 ***\n#> factor(dev)4       -1.01574    0.02854 -35.591  < 2e-16 ***\n#> factor(dev)5       -1.44957    0.03017 -48.041  < 2e-16 ***\n#> factor(dev)6       -1.84320    0.03228 -57.094  < 2e-16 ***\n#> factor(dev)7       -2.14799    0.03517 -61.072  < 2e-16 ***\n#> factor(dev)8       -2.34589    0.03944 -59.476  < 2e-16 ***\n#> factor(dev)9       -2.50783    0.04676 -53.636  < 2e-16 ***\n#> factor(dev)10      -2.65570    0.06380 -41.622  < 2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> (Dispersion parameter for Negative Binomial(331.5547) family taken to be 1)\n#> \n#>     Null deviance: 11754.138  on 54  degrees of freedom\n#> Residual deviance:    54.947  on 36  degrees of freedom\n#> AIC: 962.24\n#> \n#> Number of Fisher Scoring iterations: 1\n#> \n#> \n#>               Theta:  331.6 \n#>           Std. Err.:  64.7 \n#> \n#>  2 x log-likelihood:  -922.243\n```\n:::\n\n\nThe `factor(origin)` parameters, often also known as `alpha` parameters, represent the accident year level of loss. The `factor(dev)` parameters (or `beta` parameters) represent the development year direction. We can re-arrange the fitted development year parameters to re-create the standard chain ladder link ratios, as shown in the table below.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmodel_params <- broom::tidy(est_chainladder_nb$model) %>%\n  separate(term, into = c(\"factor\",\"variable\",\"value\"), \"\\\\(|\\\\)\") %>%\n  mutate(value = as.numeric(value)) %>%\n  mutate(value = case_when(variable == \"Intercept\" ~ 1,\n                          variable == \"origin\" ~  value - 1988 + 1, \n                          variable == \"dev\" ~ value)) %>%\n  mutate(variable = case_when(variable == \"Intercept\" ~ \"origin\",\n                              TRUE ~ variable)) %>%\n  select(variable, value, estimate) %>%\n  bind_rows(tibble(variable = \"dev\",value=1,estimate=0)) %>% \n  mutate(estimate2 = case_when(variable == \"origin\" & value == 1 ~ estimate[1],\n                               variable == \"origin\" & value != 1 ~ estimate[1]+estimate,\n                               variable == \"dev\" ~ estimate)) %>%\n  mutate(estimate3 = case_when(variable == \"origin\" ~ exp(estimate2),\n                               variable == \"dev\" ~ exp(estimate))) %>% \n  mutate(estimate_normalized = case_when(variable == \"origin\" ~ \n                                           exp(estimate2) * sum(.$estimate3[.$variable==\"dev\"]),\n                               variable == \"dev\" ~ \n                                 estimate3 / sum(.$estimate3[.$variable==\"dev\"]))) %>% \n  arrange(variable, value)\n\nmodel_params_link <- model_params %>%\n  filter(variable == \"dev\") %>% \n  mutate(link = lead(cumsum(estimate3) / lag(cumsum(estimate3)))) \n\nmodel_params_link %>% \n  select(`Dev period` = value, `LN(Betas)` = estimate, Betas = estimate3, \n         Normalized = estimate_normalized, `Link ratios` = link) %>% \n  mutate_at(2:5, number_format, digits = 3) %>% \n  flextable::regulartable() %>% \n  ft_theme() %>% \n  add_title_header(\"GLM parameters - development factors\", font_size = 18) %>% \n  flextable::fontsize(size = 16, part = \"all\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-c06e0478{}.cl-c06229a0{font-family:'Arial';font-size:16pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c06229b4{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c06229be{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c0624610{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c0624624{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c0624625{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c062462e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c062a0d8{width:70pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a0e2{width:76.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a0e3{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a0ec{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a0ed{width:48.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a0f6{width:48.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a0f7{width:70pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a0f8{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a100{width:76.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a101{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a10a{width:48.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a10b{width:76.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a10c{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a114{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a115{width:70pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a116{width:70pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a11e{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a11f{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a128{width:48.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a129{width:76.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a12a{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a132{width:48.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a133{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a134{width:70pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a13c{width:76.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a13d{width:48.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a146{width:73.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a147{width:70.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a150{width:70pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c062a15a{width:76.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-c06e0478'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"5\"class=\"cl-c062a133\"><p class=\"cl-c0624610\"><span class=\"cl-c06229a0\">GLM parameters - development factors</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a146\"><p class=\"cl-c0624624\"><span class=\"cl-c06229b4\">Dev period</span></p></td><td class=\"cl-c062a150\"><p class=\"cl-c0624610\"><span class=\"cl-c06229b4\">LN(Betas)</span></p></td><td class=\"cl-c062a13d\"><p class=\"cl-c0624610\"><span class=\"cl-c06229b4\">Betas</span></p></td><td class=\"cl-c062a15a\"><p class=\"cl-c0624610\"><span class=\"cl-c06229b4\">Normalized</span></p></td><td class=\"cl-c062a147\"><p class=\"cl-c0624610\"><span class=\"cl-c06229b4\">Link ratios</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a0ec\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">1</span></p></td><td class=\"cl-c062a0d8\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.000</span></p></td><td class=\"cl-c062a0ed\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.000</span></p></td><td class=\"cl-c062a0e2\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.293</span></p></td><td class=\"cl-c062a0e3\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.814</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a10c\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">2</span></p></td><td class=\"cl-c062a115\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-0.206</span></p></td><td class=\"cl-c062a10a\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.814</span></p></td><td class=\"cl-c062a10b\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.239</span></p></td><td class=\"cl-c062a114\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.262</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a10c\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">3</span></p></td><td class=\"cl-c062a115\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-0.745</span></p></td><td class=\"cl-c062a10a\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.475</span></p></td><td class=\"cl-c062a10b\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.139</span></p></td><td class=\"cl-c062a114\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.158</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a10c\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">4</span></p></td><td class=\"cl-c062a115\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-1.016</span></p></td><td class=\"cl-c062a10a\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.362</span></p></td><td class=\"cl-c062a10b\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.106</span></p></td><td class=\"cl-c062a114\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.089</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a10c\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">5</span></p></td><td class=\"cl-c062a115\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-1.450</span></p></td><td class=\"cl-c062a10a\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.235</span></p></td><td class=\"cl-c062a10b\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.069</span></p></td><td class=\"cl-c062a114\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.055</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a10c\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">6</span></p></td><td class=\"cl-c062a115\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-1.843</span></p></td><td class=\"cl-c062a10a\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.158</span></p></td><td class=\"cl-c062a10b\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.046</span></p></td><td class=\"cl-c062a114\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.038</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a10c\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">7</span></p></td><td class=\"cl-c062a115\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-2.148</span></p></td><td class=\"cl-c062a10a\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.117</span></p></td><td class=\"cl-c062a10b\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.034</span></p></td><td class=\"cl-c062a114\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.030</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a10c\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">8</span></p></td><td class=\"cl-c062a115\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-2.346</span></p></td><td class=\"cl-c062a10a\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.096</span></p></td><td class=\"cl-c062a10b\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.028</span></p></td><td class=\"cl-c062a114\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.025</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a11f\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">9</span></p></td><td class=\"cl-c062a116\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-2.508</span></p></td><td class=\"cl-c062a128\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.081</span></p></td><td class=\"cl-c062a129\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.024</span></p></td><td class=\"cl-c062a11e\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">1.021</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c062a101\"><p class=\"cl-c0624625\"><span class=\"cl-c06229be\">10</span></p></td><td class=\"cl-c062a0f7\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">-2.656</span></p></td><td class=\"cl-c062a0f6\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.070</span></p></td><td class=\"cl-c062a100\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">0.021</span></p></td><td class=\"cl-c062a0f8\"><p class=\"cl-c062462e\"><span class=\"cl-c06229be\">  NA</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n# Residual diagnostics of standard chain ladder\n\nGiven we've used the GLM formulation to produce the Chain Ladder estimate, we can look at residual plots to understand the goodness-of-fit of our model.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nresiduals_cl <- broom::augment(est_chainladder_nb$model) %>% \n  mutate_at(3:4, ~ as.integer(paste(.x))) %>% \n  mutate(cal_year = `factor(origin)` + `factor(dev)` - 1)\n\nresidual_plot <- function(resid_df, y_var, x_var, x_breaks = TRUE){\n  x_var_en <- rlang::enquo(x_var)\n  y_var_en <- rlang::enquo(y_var)\n  \n  outliers <- resid_df %>% \n    filter(abs(!!y_var_en) > 2)\n  \n  ggplot(data = resid_df, aes(y = !!y_var_en, x = !!x_var_en)) +\n    geom_point() +\n    geom_smooth(se = FALSE) +\n    geom_hline(yintercept = c(-2,2)) +\n    geom_text(aes(x = !!x_var_en, y = !!y_var_en, label = .rownames), \n              data = outliers, hjust = 0, size = 3, nudge_x = 0.1) +\n    theme(axis.title = element_text(size = 9), axis.text = element_text(size = 9)) +\n    if(x_breaks){\n      scale_x_continuous(breaks = resid_df %>% select(!!x_var_en) %>% \n                         distinct() %>% pull())\n    }\n}\n\ngg_origin <- residual_plot(residuals_cl, .std.resid, `factor(origin)`)\ngg_dev <- residual_plot(residuals_cl, .std.resid, `factor(dev)`)\ngg_cal <- residual_plot(residuals_cl, .std.resid, cal_year)\ngg_fit <- residual_plot(residuals_cl, .std.resid, .fitted, FALSE)\n\ngg_origin + gg_dev + \n  gg_cal + gg_fit + \n  plot_layout(ncol = 2)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/diagnostics-chain-ladder-1.png){fig-align='center' width=120%}\n:::\n:::\n\n\nThese plots show the standardized residuals versus accident (origin) year, development period, calendar year, and fitted values. All of the plots look reasonable with the residuals randomly centered around zero and only a few outliers in each.\n\n# Bayesian chain ladder using `rstanarm`\n\nNow we can take the same GLM formulation, but use Bayesian methods for the estimation. The `rstanarm` package makes it very straightforward to do this.\n\nFirst we convert our `triangle` object to \"long\" form.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlong_paid_tri <- cum2incr(paid_triangle) %>%\n  as.data.frame(paid_triangle) %>% \n  filter(!is.na(value))\nhead(long_paid_tri)\n#>   acc_yr dev_lag value\n#> 1   1988       1 41821\n#> 2   1989       1 48167\n#> 3   1990       1 52058\n#> 4   1991       1 57251\n#> 5   1992       1 59213\n#> 6   1993       1 59475\n```\n:::\n\n\nThen we can call the `stan_glm` function to fit our model.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nnb_theta <- est_chainladder_nb$model$theta\n\nest_cl_bayesian_nb <- stan_glm(value ~ factor(acc_yr) + factor(dev_lag),\n                            family = neg_binomial_2(link = \"log\"), \n                            prior_aux = normal(0, nb_theta * 2),\n                            data = long_paid_tri)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbroom.mixed::tidy(est_cl_bayesian_nb, intervals = TRUE, prob = 0.95) %>% \n  mutate_at(2:3, popformatting::number_format, digits = 3) %>% \n  flextable::regulartable() %>% \n  popformatting::ft_theme() %>% \n  flextable::align(j=1, align=\"left\", part = \"all\") %>% \n  add_title_header(\"Bayesian chain ladder parameter summary\", \n                   font_size = 18) %>% \n  flextable::fontsize(size = 16, part = \"all\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-c38f2efc{}.cl-c3848948{font-family:'Arial';font-size:16pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c384895c{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c384895d{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c384a590{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c384a5c2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c384ee38{width:62.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee42{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee4c{width:61.5pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee4d{width:61.5pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee56{width:62.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee60{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee61{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee62{width:61.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee6a{width:62.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee6b{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee74{width:61.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee75{width:62.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee7e{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee7f{width:62.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c384ee88{width:61.5pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-c38f2efc'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"3\"class=\"cl-c384ee6b\"><p class=\"cl-c384a590\"><span class=\"cl-c3848948\">Bayesian chain ladder parameter summary</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee7e\"><p class=\"cl-c384a590\"><span class=\"cl-c384895c\">term</span></p></td><td class=\"cl-c384ee7f\"><p class=\"cl-c384a590\"><span class=\"cl-c384895c\">estimate</span></p></td><td class=\"cl-c384ee88\"><p class=\"cl-c384a590\"><span class=\"cl-c384895c\">std.error</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee42\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">(Intercept)</span></p></td><td class=\"cl-c384ee38\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">10.648</span></p></td><td class=\"cl-c384ee4c\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.034</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1989</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.146</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.032</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1990</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.242</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.034</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1991</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.370</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.036</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1992</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.392</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.037</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1993</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.370</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.040</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1994</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.356</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.043</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1995</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.247</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.048</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1996</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.189</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.057</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(acc_yr)1997</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.045</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.076</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)2</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-0.206</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.031</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)3</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-0.745</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.032</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)4</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-1.016</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.035</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)5</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-1.450</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.038</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)6</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-1.843</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.039</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)7</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-2.147</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.044</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)8</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-2.344</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.046</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee60\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)9</span></p></td><td class=\"cl-c384ee56\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-2.507</span></p></td><td class=\"cl-c384ee4d\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.054</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c384ee61\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">factor(dev_lag)10</span></p></td><td class=\"cl-c384ee6a\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">-2.654</span></p></td><td class=\"cl-c384ee62\"><p class=\"cl-c384a5c2\"><span class=\"cl-c384895d\">0.077</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nWe can compare the parameter estimates from our two methods and see that they are in close agreement.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbroom.mixed::tidy(est_cl_bayesian_nb, intervals = FALSE) %>% \n  bind_cols(broom::tidy(est_chainladder_nb$model) %>% select(-term, \"Standard\"=estimate)) %>% \n  select(term, Bayesian = estimate, Standard) %>% \n  mutate(`% error` = Bayesian / Standard - 1) %>% \n  mutate_at(2:3, number_format, digits = 3) %>% \n  mutate_at(4, pct_format) %>% \n  flextable::regulartable() %>% \n  popformatting::ft_theme() %>% \n  flextable::align(j=1, align=\"left\", part = \"all\") %>% \n  add_title_header(\"Parameter estimate comparison\", font_size = 18) %>% \n  flextable::fontsize(size = 16, part = \"all\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-c3e93bb8{}.cl-c3dd65ae{font-family:'Arial';font-size:16pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c3dd65b8{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c3dd65c2{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c3dd82dc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c3dd82e6{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c3dddcf0{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddcfa{width:65.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd04{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd05{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd0e{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd0f{width:65.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd18{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd19{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd1a{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd22{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd23{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd24{width:65.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd2c{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd2d{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd2e{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd36{width:65.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd37{width:112.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd40{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd41{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c3dddd4a{width:65.2pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-c3e93bb8'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"4\"class=\"cl-c3dddd2d\"><p class=\"cl-c3dd82dc\"><span class=\"cl-c3dd65ae\">Parameter estimate comparison</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd37\"><p class=\"cl-c3dd82dc\"><span class=\"cl-c3dd65b8\">term</span></p></td><td class=\"cl-c3dddd40\"><p class=\"cl-c3dd82dc\"><span class=\"cl-c3dd65b8\">Bayesian</span></p></td><td class=\"cl-c3dddd4a\"><p class=\"cl-c3dd82dc\"><span class=\"cl-c3dd65b8\">Standard</span></p></td><td class=\"cl-c3dddd41\"><p class=\"cl-c3dd82dc\"><span class=\"cl-c3dd65b8\">% error</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd04\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">(Intercept)</span></p></td><td class=\"cl-c3dddd05\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">10.648</span></p></td><td class=\"cl-c3dddcfa\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">10.648</span></p></td><td class=\"cl-c3dddcf0\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.00%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1989</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.146</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.145</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.82%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1990</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.242</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.241</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.37%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1991</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.370</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.369</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.41%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1992</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.392</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.391</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.28%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1993</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.370</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.369</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.27%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1994</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.356</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.354</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.44%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1995</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.247</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.245</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.88%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1996</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.189</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.186</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">1.66%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(acc_yr)1997</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.045</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.043</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">5.24%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)2</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.206</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.206</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.06%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)3</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.745</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.745</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.06%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)4</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-1.016</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-1.016</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.07%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)5</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-1.450</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-1.450</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">0.04%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)6</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-1.843</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-1.843</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.03%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)7</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.147</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.148</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.07%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)8</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.344</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.346</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.08%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd0e\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)9</span></p></td><td class=\"cl-c3dddd19\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.507</span></p></td><td class=\"cl-c3dddd0f\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.508</span></p></td><td class=\"cl-c3dddd18\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.05%</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c3dddd23\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">factor(dev_lag)10</span></p></td><td class=\"cl-c3dddd1a\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.654</span></p></td><td class=\"cl-c3dddd24\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-2.656</span></p></td><td class=\"cl-c3dddd22\"><p class=\"cl-c3dd82e6\"><span class=\"cl-c3dd65c2\">-0.06%</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nWe can also confirm that the reserve estimates produced by both methods are the same.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nfuture_tri <- cum2incr(paid_triangle) %>%\n  as.data.frame(paid_triangle) %>% \n  filter(is.na(value)) %>%\n  mutate(acc_yr = factor(acc_yr), dev_lag = factor(dev_lag)) %>% \n  select(-value)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npost_predict_draws <- future_tri %>% \n  tidybayes::add_predicted_draws(est_cl_bayesian_nb) %>%\n  mutate_at(7, as.double)\n\nbayesian_cl_summary <- post_predict_draws %>%\n  group_by(acc_yr, .draw) %>% \n  summarise(.prediction = sum(.prediction)) %>% \n  summarise(mean_est = mean(.prediction), sd_est = sd(.prediction), \n            cv = sd(.prediction) / mean(.prediction))\n\nsim_total <- post_predict_draws %>%\n  group_by(.draw) %>% \n  summarise(.prediction = sum(.prediction))\n\nbayesian_cl_summary <- bayesian_cl_summary %>%\n  bind_rows(tibble(acc_yr = \"total\", \n                   mean_est = mean(sim_total$.prediction),\n                   sd_est = sd(sim_total$.prediction),\n                   cv = sd(sim_total$.prediction)/mean(sim_total$.prediction))) %>% \n  mutate(Latest = est_chainladder_nb$summary$Latest, IBNR = mean_est, \n         `S.E.` = sd_est, CV = cv, \n         Ultimate = est_chainladder_nb$summary$Latest + mean_est,\n         `Dev.To.Date` = Latest / Ultimate)\n\nbayesian_cl_summary %>% \n  select(`Acc Yr` = acc_yr, Latest, `Dev.To.Date`, Ultimate, IBNR, `S.E.`, CV) %>% \n  mutate_at(c(2,4:6), number_format) %>% \n  flextable::regulartable() %>% \n  popformatting::ft_theme(add_w = 0.0, add_h = 0.00, add_h_header = 0.00) %>%\n  flextable::bg(i = nrow(est_chainladder_nb$summary), bg = \"#F2F2F2\", part = \"body\") %>% \n  popformatting::add_title_header(\"Bayesian chain ladder reserve estimate\", font_size = 18) %>% \n  flextable::fontsize(size = 16, part = \"all\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"tabwid\"><style>.cl-c493b14c{}.cl-c487fd98{font-family:'Arial';font-size:16pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c487fdac{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 131, 169, 1.00);background-color:transparent;}.cl-c487fdb6{font-family:'Arial';font-size:16pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c4881986{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c488199a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:4pt;padding-top:2pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c48819a4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c48819ae{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:4pt;line-height: 1;background-color:transparent;}.cl-c4888010{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888024{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888025{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488802e{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488802f{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888030{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888038{width:53.1pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888039{width:71.4pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888042{width:62.3pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888043{width:45.7pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488804c{width:47pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488804d{width:75.1pt;background-color:rgba(242, 242, 242, 1.00);vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488804e{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888056{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888057{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888058{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888060{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888061{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(217, 217, 217, 1.00);border-top: 1pt solid rgba(217, 217, 217, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888062{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488806a{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888074{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888075{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488807e{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488807f{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(0, 131, 169, 1.00);border-top: 1pt solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888088{width:53.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888089{width:71.4pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(255, 255, 255, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888092{width:62.3pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c4888093{width:45.7pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 1pt solid rgba(255, 255, 255, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488809c{width:47pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c488809d{width:75.1pt;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 131, 169, 1.00);border-top: 2pt solid rgba(0, 131, 169, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-c493b14c'>\n```\n\n```{=html}\n<thead><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"7\"class=\"cl-c4888062\"><p class=\"cl-c4881986\"><span class=\"cl-c487fd98\">Bayesian chain ladder reserve estimate</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888093\"><p class=\"cl-c4881986\"><span class=\"cl-c487fdac\">Acc Yr</span></p></td><td class=\"cl-c4888092\"><p class=\"cl-c4881986\"><span class=\"cl-c487fdac\">Latest</span></p></td><td class=\"cl-c488809d\"><p class=\"cl-c488199a\"><span class=\"cl-c487fdac\">Dev.To.Date</span></p></td><td class=\"cl-c4888092\"><p class=\"cl-c4881986\"><span class=\"cl-c487fdac\">Ultimate</span></p></td><td class=\"cl-c4888088\"><p class=\"cl-c4881986\"><span class=\"cl-c487fdac\">IBNR</span></p></td><td class=\"cl-c488809c\"><p class=\"cl-c4881986\"><span class=\"cl-c487fdac\">S.E.</span></p></td><td class=\"cl-c4888089\"><p class=\"cl-c488199a\"><span class=\"cl-c487fdac\">CV</span></p></td></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888025\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1989</span></p></td><td class=\"cl-c488802f\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">162,903</span></p></td><td class=\"cl-c4888010\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.9793075</span></p></td><td class=\"cl-c488802f\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">166,345</span></p></td><td class=\"cl-c488802e\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">3,442</span></p></td><td class=\"cl-c4888024\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">352</span></p></td><td class=\"cl-c4888030\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.10232483</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1990</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">176,346</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.9556824</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">184,524</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">8,178</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">591</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.07232153</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1991</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">187,266</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.9252061</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">202,405</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">15,139</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">896</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.05916681</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1992</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">189,506</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.8927995</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">212,260</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">22,754</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1,207</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.05303895</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1993</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">175,475</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.8460864</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">207,396</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">31,921</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1,630</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.05107670</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1994</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">159,972</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.7780818</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">205,598</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">45,626</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">2,310</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.05062487</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1995</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">122,811</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.6700935</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">183,274</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">60,463</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">3,271</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.05410145</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1996</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">92,242</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.5319070</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">173,418</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">81,176</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">5,144</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.06337166</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888061\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1997</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">43,962</span></p></td><td class=\"cl-c4888058\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.2923913</span></p></td><td class=\"cl-c4888060\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">150,353</span></p></td><td class=\"cl-c4888057\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">106,391</span></p></td><td class=\"cl-c4888056\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">8,431</span></p></td><td class=\"cl-c488804e\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.07924123</span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-c4888043\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">total</span></p></td><td class=\"cl-c4888042\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1,310,483</span></p></td><td class=\"cl-c488804d\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.7774703</span></p></td><td class=\"cl-c4888042\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">1,685,573</span></p></td><td class=\"cl-c4888038\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">375,090</span></p></td><td class=\"cl-c488804c\"><p class=\"cl-c48819a4\"><span class=\"cl-c487fdb6\">12,163</span></p></td><td class=\"cl-c4888039\"><p class=\"cl-c48819ae\"><span class=\"cl-c487fdb6\">0.03242720</span></p></td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nThe 375,090 estimate from the Bayesian method is only 0.44% different than the traditional estimate. Similarly, the total CV of 3.24% is close to the traditional estimate of 3.11%.\n\n# Bayesian posterior predictive checks\n\nUsing a Bayesian framework allows us to more fully interrogate our model and the assumptions underlying it. We can look at the distribution of parameters and predictions, making valid probabilistic statements about our results.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npp_check(est_cl_bayesian_nb, \"ecdf_overlay\") + \n  pp_check(est_cl_bayesian_nb, \"dens_overlay\") +\n  pp_check(est_cl_bayesian_nb, \"boxplot\") +\n  plot_layout(ncol = 2)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/bayesian-ppc-1.png){fig-align='center' width=120%}\n:::\n:::\n\n\nBelow is a histogram of the total estimated reserves.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsim_total %>% \n  ggplot(aes(x = .prediction)) +\n  geom_histogram() +\n  scale_x_continuous(labels = number_format) +\n  ggtitle(\"Distribution of total reserve estimate\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/reserve-histogram-1.png){fig-align='center' width=120%}\n:::\n:::\n\n\n# Further enhancements\n\nNow that we have successfully replicated the standard chain ladder method using Bayesian methods, we can move forward taking advantage of the flexibility that the Bayesian framework provides.\n\nFor example, we can:\n\n-   Add informative prior distributions on the parameters\n-   Back-test reserve estimates to determine accuracy in forecasting reserves\n-   Test other distribution families (e.g. Gamma, Skew Normal, etc.)\n-   Add additional variables, such as a calendar year effect\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/tabwid-1.0.0/tabwid.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/tabwid-1.0.0/scrool.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}